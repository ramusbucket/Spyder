<div class="help-block"></div>
<div class="jumbotron text-center">
    <h1 class="text-center">Mongo saver service</h1>
    <h2>Status:<span class="text-success">Active</span></h2>
</div>

<div class="row text-center">
    <a class="btn btn-success" href="/Home/StartSavers">Start savers</a>
    <button class="btn btn-info" href="" id="getServiceStatus">Get Service Status</button>
</div>

@section scripts {
    <!--Script references. -->
    <!--The jQuery library is required and is referenced by default in _Layout.cshtml. -->
    <!--Reference the SignalR library. -->
    <script src="~/Scripts/jquery.signalR-2.2.2.min.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="~/signalr/hubs"></script>
    <!--SignalR script to update the chat page and send messages.-->
    <script>
       
        $(function () {
            // Reference the auto-generated proxy for the hub.
            var serviceStatistics = $.connection.serviceStatisticsHub;
            // Create a function that the hub can call back to display messages.
            serviceStatistics.client.pushStatistics = function (result) {
                // Add the message to the page.

                var stats = JSON.parse(result);

                console.log(stats);
               // Parse statistics to a readable json
            };

            $.connection.hub
                .start()
                .done(function () {
                    alert("Connected");

                    $("#getServiceStatus").click(function () {
                        serviceStatistics.server.getServiceStatus();
                    })
                });
        });
        // This optional function html-encodes messages for display in the page.
    </script>
}